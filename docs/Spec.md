# 주식 분석 애플리케이션 기술 명세서

## 1. 개요

본 문서는 주식 데이터를 수집하고 분석하여 Streamlit을 통해 시각화하는 데모 프로젝트의 기술 명세서입니다. 이 프로젝트는 파이썬 개발을 소개하기 위한 목적으로 구상되었으며, 실무 레벨에서 중점적으로 고려되어야 하는 API 통신과 같은 사항들은 구현하지 않습니다.

## 2. 기술 스택

- **언어**: Python 3.12
- **패키지 관리자**: Poetry
- **프론트엔드 프레임워크**: Streamlit
- **데이터 처리**: Pandas
- **데이터 수집**: yfinance
- **시각화**: Plotly

## 3. 디렉토리 구조

```
.
├── docs/               # 문서 (PRD, Spec 등)
├── src/                # 소스 코드
│   └── be/             # 백엔드 로직
│       ├── data/       # 데이터 수집 및 처리 관련 모듈
│       └── indicators/ # 기술적 지표 계산 모듈
├── streamlit/          # Streamlit 애플리케이션
└── tests/              # 테스트 코드
```

## 4. 기능 요구사항

### 4.1 데이터 수집 모듈 (`src/be/data`)

#### 4.1.1 주식 데이터 수집기 (`stock_collector.py`)

- **기능**: 주어진 Ticker에 대한 주식 데이터를 yfinance를 통해 수집
- **입력 파라미터**:
  - `ticker` (str): 주식 심볼 (예: 'AAPL')
  - `days` (int): 현재로부터 가져올 과거 데이터의 일수 (기본값: 365)
- **출력**: 
  - Pandas DataFrame (Open, High, Low, Close, Volume 포함)
- **예외 처리**:
  - 유효하지 않은 Ticker 처리
  - 네트워크 오류 처리

#### 4.1.2 주요 지수 구성 종목 수집기 (`index_components.py`)

- **기능**: S&P500, NASDAQ 100 지수의 구성 종목 목록을 수집
- **구현할 기능**:
  - S&P500 구성 종목 목록 수집 및 캐싱
  - NASDAQ 100 구성 종목 목록 수집 및 캐싱
- **출력**:
  - 티커와 기업명이 포함된 DataFrame
- **예외 처리**:
  - 네트워크 오류 처리
  - 데이터 형식 오류 처리

### 4.2 기술적 지표 모듈 (`src/be/indicators`)

#### 4.2.1 이동평균선 (`moving_averages.py`)

- **기능**: 주가 데이터에 대한 이동평균선 계산
- **구현할 지표**:
  - MA5 (5일 이동평균선)
  - MA10 (10일 이동평균선)
  - MA30 (30일 이동평균선)
  - MA60 (60일 이동평균선)
- **입력**: 주가 데이터 DataFrame
- **출력**: 이동평균선이 추가된 DataFrame

#### 4.2.2 MACD (`macd.py`)

- **기능**: MACD(Moving Average Convergence Divergence) 계산
- **입력**: 주가 데이터 DataFrame
- **출력**: MACD, Signal, Histogram 값이 추가된 DataFrame
- **파라미터**:
  - 단기 EMA 기간: 12일
  - 장기 EMA 기간: 26일
  - Signal 기간: 9일

#### 4.2.3 볼린저 밴드 (`bollinger_bands.py`)

- **기능**: 볼린저 밴드 계산
- **입력**: 주가 데이터 DataFrame
- **출력**: 상단, 중간, 하단 밴드가 추가된 DataFrame
- **파라미터**:
  - 기간: 20일
  - 표준편차 배수: 2

#### 4.2.4 RSI (`rsi.py`)

- **기능**: RSI(Relative Strength Index) 계산
- **입력**: 주가 데이터 DataFrame
- **출력**: RSI 값이 추가된 DataFrame
- **파라미터**:
  - 기간: 14일

#### 4.2.5 스토캐스틱 슬로우 (`stochastic.py`)

- **기능**: 스토캐스틱 슬로우 오실레이터 계산
- **입력**: 주가 데이터 DataFrame
- **출력**: %K, %D 값이 추가된 DataFrame
- **파라미터**:
  - %K 기간: 14일
  - %K 슬로우 기간: 3일
  - %D 기간: 3일

### 4.3 Streamlit 애플리케이션 (`streamlit/app.py`)

#### 4.3.1 사용자 인터페이스

- **레이아웃**: 단일 페이지 구성
- **입력 컴포넌트**:
  - 주요 지수 선택 드롭다운 (S&P500, NASDAQ 100)
  - 선택된 지수 내 기업 선택 드롭다운 (티커 및 기업명 표시)
  - 직접 Ticker 입력 필드 (기본값: 'AAPL')
  - 데이터 조회 기간 선택 슬라이더 (기본값: 365일)
  - 기술적 지표 선택 체크박스 (MA5, MA10, MA30, MA60, MACD, 볼린저 밴드, RSI, 스토캐스틱 슬로우)

#### 4.3.2 데이터 시각화

- **주가 차트**:
  - Plotly 라이브러리를 사용한 캔들스틱 차트 (OHLC)
  - 거래량 차트
  - 선택된 기술적 지표 오버레이
- **Plotly 구현**:
  - 인터랙티브 기능 (확대/축소, 툴팁, 범례 등) 구현
  - 테마 및 스타일 커스터마이징
- **기술적 지표 설명**:
  - 각 보조지표에 대한 주식 거래 측면에서의 설명 제공
  - 현재 선택된 주식에 대한 지표 해석 제공

## 5. 개발 방법론

- **테스트 주도 개발(TDD)** 방식으로 진행
  - 기능 설계 → 테스트 코드 작성 → 기능 구현 → 테스트 실행 순서로 진행
  - 모든 테스트 코드는 `tests/<function>/<function>.py` 형식으로 작성

## 6. 코드 품질 관리

- Google Style 코드 작성 가이드라인 준수
- 모든 클래스와 메서드에 Docstring 포함
- 한글 주석 포함
- Clean Code & Clean Architecture 원칙 준수
- DRY, KISS, YAGNI, SOLID 원칙 적용

## 7. 구현 일정

1. 데이터 수집 모듈 구현 (1일)
   - 주식 데이터 수집기 구현
   - 주요 지수 구성 종목 수집기 구현
2. 기술적 지표 모듈 구현 (3일)
3. Streamlit 애플리케이션 구현 (3일)
   - 기본 UI 구현
   - Plotly 차트 구현
   - 주요 지수 선택 기능 구현
4. 테스트 및 디버깅 (1일)
5. 문서화 및 마무리 (1일)

## 8. 제약사항 및 고려사항

- API 통신과 같은 실무 레벨 기능은 구현하지 않음
- 데이터는 yfinance를 통해 직접 가져오는 방식으로 구현
- 사용자 인증 및 권한 관리는 구현하지 않음
- 데이터 저장소는 별도로 구현하지 않음 (메모리 내 처리)
- 주요 지수 구성 종목 데이터는 주기적으로 업데이트되어야 하나, 본 프로젝트에서는 정적 데이터로 구현
